---
platform: linux

caches:
  - path: $HOME/.gradle/
  - path: $HOME/.m2/repository
  - path: $HOME/.android/sdk/cmdline-tools/bin

params:
  TERM: dumb

inputs:
  - name: pr
outputs:
  - name: reports
  - name: generatedAPK
image_resource:
  type: docker-image
  source:
    repository: darkgeat/android-studio-gitlab-ci
    tag: '3.0.0'
run:
  path: sh
  user: root
  args:
    - -c
    - |
      cd /sdk/cmdline-tools/bin
      ls -la
      ./avdmanager --verbose create avd -n test -k "system-images;android-30;google_apis;x86"