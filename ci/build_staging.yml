---
platform: linux

caches:
  - path: $HOME/.gradle/
  - path: $HOME/.m2/repository

params:
  TERM: dumb

inputs:
  - name: resource-tutorial
outputs:
  - name: generatedAPK
image_resource:
  type: docker-image
  source:
    repository: darkgeat/android-studio-gitlab-ci
    tag: '2.0.0'
run:
  dir: resource-tutorial
  path: sh
  user: root
  args:
    - -c
    - |
      ./gradlew assembleDebug --stacktrace -PdisablePreDex
      ls -la
      cd app/build/outputs
      ls -la